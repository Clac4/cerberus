#+STARTUP: showall
#+OPTIONS: num:nil author:nil

* ffmpeg record 2nd display

record second display at 1920x1080 at 30 fps

#+BEGIN_SRC sh
ffmpeg \
-f x11grab -r 30 -video_size 1920x1080 -i :0.0+1366,0 \
-c:v libx264 -preset veryfast -crf 18 -profile:v high \
-pix_fmt yuv420p -movflags +faststart -f mp4 \
video-$(date +"%H-%M-%m-%d-%y").mp4
#+END_SRC

record second display at 1920x1080 at 60 fps

#+BEGIN_SRC sh
ffmpeg \
-f x11grab -r 60 -video_size 1920x1080 -i :0.0+1366,0 \
-c:v libx264 -preset veryfast -crf 18 -profile:v high \
-pix_fmt yuv420p -movflags +faststart -f mp4 \
video-$(date +"%H-%M-%m-%d-%y").mp4
#+END_SRC

record display at 1366x768 at 60 fps and mic

#+BEGIN_SRC sh
ffmpeg \
-f oss -ac 1 -ar 44.1k \
-i /dev/dsp2.0 \
-filter_complex \
"[0:0] compand=attacks=0:points=-40/-90|-24/-12|0/-7|20/-7,
highpass=f=60,
lowpass=f=13700,
afftdn=nt=w,
adeclick,
deesser,
anequalizer=c0 f=106 w=100 g=-6 t=1,
anequalizer=c0 f=205 w=100 g=-3 t=1,
anequalizer=c0 f=509 w=100 g=-2 t=1,
anequalizer=c0 f=5098 w=100 g=+1 t=1,
loudnorm" \
-f x11grab -r 60 -video_size 1366x768 -i :0.0 \
-c:v libx264 -preset veryfast -crf 18 -profile:v high \
-c:a aac -ac 1 -ar 44.1k \
-pix_fmt yuv420p -movflags +faststart -f mp4 \
video-$(date +"%H-%M-%m-%d-%y").mp4
#+END_SRC


record second display at 1920x1080 at 60 fps and mic

#+BEGIN_SRC sh
ffmpeg \
-f oss -ac 1 -ar 44.1k \
-i /dev/dsp2.0 \
-filter_complex \
"[0:0] compand=attacks=0:points=-40/-90|-24/-12|0/-7|20/-7,
highpass=f=60,
lowpass=f=13700,
afftdn=nt=w,
adeclick,
deesser,
anequalizer=c0 f=106 w=100 g=-6 t=1,
anequalizer=c0 f=205 w=100 g=-3 t=1,
anequalizer=c0 f=509 w=100 g=-2 t=1,
anequalizer=c0 f=5098 w=100 g=+1 t=1,
loudnorm" \
-f x11grab -r 30 -video_size 1920x1080 -i :0.0+1366,0 \
-c:v libx264 -preset veryfast -crf 18 -profile:v high \
-c:a aac -ac 1 -ar 44.1k \
-pix_fmt yuv420p -movflags +faststart -f mp4 \
video-$(date +"%H-%M-%m-%d-%y").mp4
#+END_SRC

** ffmpeg screen recording with audio filters

#+BEGIN_SRC sh
ffmpeg \
-thread_queue_size 1024 \
-f oss -ac 1 -ar 44.1k \
-i /dev/dsp2.0 \
-thread_queue_size 1024 \
-f x11grab -r 30 -video_size 1366x768 -i :0.0 \
-filter:a "asetpts=N/SR/TB" \
-c:v libx264 -preset veryfast -crf 18 -profile:v high \
-c:a pcm_s16le \
-pix_fmt yuv420p \
video-$(date +"%H-%M-%m-%d-%y").mkv
#+END_SRC

+ orginal

#+BEGIN_SRC sh
ffmpeg \
-f x11grab -r 30 -video_size 1366x768 \
-i :0.0 \
-c:v libx264 -preset veryfast -crf 18 \
-movflags +faststart -f mp4 \
-pix_fmt yuv420p \
video-$(date +"%H-%M-%m-%d-%y").mp4
#+END_SRC


+ audio

#+BEGIN_SRC sh
ffmpeg \
-thread_queue_size 1024 \
-f oss -ac 1 -ar 44.1k \
-i /dev/dsp2.0 \
-filter_complex \
"[0:0] compand=attacks=0:points=-40/-90|-24/-12|0/-7|20/-7,
highpass=f=60,
lowpass=f=13700,
afftdn=nt=w,
adeclick,
deesser,
anequalizer=c0 f=106 w=100 g=-6 t=1,
anequalizer=c0 f=205 w=100 g=-3 t=1,
anequalizer=c0 f=509 w=100 g=-2 t=1,
anequalizer=c0 f=5098 w=100 g=+1 t=1,
loudnorm" \
-thread_queue_size 1024 \
-f x11grab -r 30 -video_size 1366x768 -i :0.0 \
-c:v libx264 -preset veryfast -crf 18 -profile:v high \
-c:a aac -ac 1 -ar 44.1k -strict -2 \
-pix_fmt yuv420p -movflags +faststart -f mp4 \
video-$(date +"%H-%M-%m-%d-%y").mp4
#+END_SRC
