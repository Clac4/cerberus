#+STARTUP: content
* transmission remote

transmission remote set up

** transmission install

#+begin_src sh
sudo apt install transmission-cli transmission-daemon transmission-common
#+end_src

** transmission-daemon start

start the transmission-daemon
to create the config file at ~/.config/transmission-daemon/settings.json

#+begin_src sh
transmission-daemon &
#+end_src

stop the transmission-daemon

#+begin_src sh
pkill -3 transmission-daemon
#+end_src

** transmission run as user

*** stop transmission

#+begin_src sh
sudo systemctl stop transmission-daemon
#+end_src

*** override the provided service file

#+begin_src sh
sudo mkdir -p /etc/systemd/system/transmission.service.d/
#+end_src

*** create the username.conf file

#+begin_src sh
sudo touch /etc/systemd/system/transmission.service.d/username.conf
#+end_src

*** edit the username.conf file

edit the username.conf file and replace your_username with your username

#+begin_src conf
[Service]
User=your_username
#+end_src

*** reload the systemd units

#+begin_src sh
sudo systemctl daemon-reload
#+end_src

*** stop transmission

Next, you'll want to start and then stop transmission
to make it create the ~/.config/transmission-daemon/ directory for your new user.

#+begin_src sh
sudo systemctl start transmission-daemon; sudo systemctl stop transmission-daemon
#+end_src

From here, you should be able to update ~/.config/transmission-daemon/settings.json normally.

*** start transmission

#+begin_src sh
sudo systemctl start transmission-daemon
#+end_src

** web ui password

*** stop the transmission-daemon

#+begin_src sh
sudo systemctl stop transmission-daemon
#+end_src

*** download the [[https://github.com/tomwijnroks/transmission-pwgen][transmission-pwgen]] script 

#+begin_src sh
curl -so transmission-pwgen.sh https://raw.githubusercontent.com/tomwijnroks/transmission-pwgen/master/transmission-pwgen.sh
#+end_src

*** make the script executable

#+begin_src sh
chmod +x transmission-pwgen.sh
#+end_src

*** edit the script and set options

change the shebang to sh
set the PASSWORD_LENGTH=64
remove the .sh file extension

#+begin_src sh
#!/bin/sh
#
# https://github.com/tomwijnroks/transmission-pwgen

# Define the password length.
PASSWORD_LENGTH=64

# Generate a random password (alphanumeric).
PASS=$(cat /dev/urandom | tr -dc '[:alnum:]' | fold -w ${PASSWORD_LENGTH} | head -n1)

# Generate a random salt (alphanumeric + two special characters).
# Source: https://github.com/transmission/transmission/blob/master/libtransmission/crypto-utils.c#L132-L136
SALT=$(cat /dev/urandom | tr -dc '[:alnum:]./' | fold -w 8 | head -n1)

# Combine password + salt and use sha1sum to create the hash.
HASH=$(echo -n ${PASS}${SALT} | sha1sum | awk '{print $1}')

# Print the plain text password.
echo "plain_text_password = ${PASS}"

# Print the rpc-password string: hash + salt prepended with a curly bracket.
# Source: https://github.com/transmission/transmission/blob/master/libtransmission/crypto-utils.c#L153
echo "rpc_password_string = {${HASH}${SALT}"

#+end_src

*** run the script

copy the transmission-pwgen to your ~/bin directory

#+begin_src sh
cp transmission-pwgen ~/bin
#+end_src

Execute transmission-pwgen to generate a password and rpc-password string.

#+begin_src sh
transmission-pwgen
#+end_src

this will output your password and the sha1 hash

+ edit the ~/.config/transmission-daemon/settings.json file

+ change rpc-authentication-required to true

+ edit the rpc-password and the rpc_password_string

+ restart the transmission-daemon

#+begin_src sh
sudo systemctl start transmission-daemon
#+end_src


